<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punto de Venta</title>
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles_PDV.css">
</head>
<body class="container-fluid">
    <!-- Inicio navbar -->
    <nav class="navbar bg-body-tertiary navbar-expand-lg fixed-top holis" id="navbar">
        <div class="container-fluid" style="height: 50px;">
            <a class="navbar-brand legend" href="#">
            <img src="./img/LOGO_DULCERÍA_COLOR.png" alt="Logo de la Dulceria MyA" class="img-fluid" />
            Dulceria MyA
            </a>
    
            <!-- Abrir menu despegable DISPOSITIVOS PEQUEÑOS -->
            <button class="navbar-toggler" style="height: 38px; margin-bottom: 100px; margin-top: -15px;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
            aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
    
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <!-- Cerarr menu despegable -->
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Dulceria MyA</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
    
            <div class="offcanvas-body">
                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3 nav-bar-options">

                <li class="nav-item">
                    <a class="nav-link fs-5 me-3" aria-current="page" href="productosCRUD.html" target="_blank">Productos</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link fs-5 me-3" aria-current="page" href="tickets.html" target="_blank">Tickets</a>
                </li>
                
                <li class="nav-item mx-2">
                    <button class="btn margin-right btn-primary-color" id="btn-fullscren">[ ]</button>
                </li> 
                <li class="nav-item">
                    <select id="select-printer" class="form-select" aria-label="Default select example">
                        <option value="">Elegir impresora</option>
                      </select>
                </li>
                </ul>
                
                </div>
            </div>
        </div>
    </nav>
    <!-- Final navbar -->

    <!-- Contenedor principal del punto de venta -->
    <main id="main-container">
        <div class="container-fluid">
            <div class="row">
                <!-- Inicio contenedor tickets -->
                <div id="ticket" class="col-xl-8 col-lg-8 col-sm-12 col-12 d-flex flex-column container-fluid">
                    <!-- Inicio control y busqueda panel -->
                    <div id="contro-ticket-panel" class="d-flex flex-row-reverse gap-3 p-1" style="height: 50px;">
                        <button id="btn-delete-row" class="btn btn-warning-color">Eliminar producto [Supr] <i class="fa-solid fa-trash"></i></button>
                        <button id="btn-aply-discount" class="btn btn-outline-color">Aplicar Mayoreo [F11] <i class="fa-solid fa-tag"></i></button>
                        <button id="btn-common-article" class="btn btn-outline-color">CTRL + P - Articulo común </button>
                    </div>
                    <div id="product-search" style="height: 50px;">
                        <div id="div-search-product" class="d-flex flex-row gap-3 p-1">
                            <input type="text" id="input-search-product" class="form-control" placeholder="Escriba el código o nombre del producto" autocomplete="off" style="width: 70%;">
                            <button id="btn-search-product" class="btn btn-primary btn-primary-color">Buscar <i class="fa-solid fa-magnifying-glass"></i></button>
                        </div>
                    </div>
                    <!-- Final control y busqueda panel -->

                    <div id="bill">
                        <table class="table table-hover table-xl">
                            <thead id="bill-table-head">
                                <th>Código de barras</th>
                                <th>Descripción</th>
                                <th>Precio</th>
                                <th>Cantidad</th>
                                <th>Importe</th>
                            </thead>
                            <tbody id="bill-table-body">
                                <!-- Aqui se insertan los elementos nuevos de la cuenta -->

                            </tbody>
                        </table>
                    </div>

                    <!-- Inicio info bar -->
                    <div id="info-bar" class="container-fluid d-flex flex-row-reverse gap-5 p-3 border border-1">
                        <h1 id="total" class="display-3 p-3">Total: 0.00</h1>
                        <button id="submit-bill" class="btn btn-primary btn-primary-color"><i class="fa-solid fa-cart-shopping"></i> F12 - Cobrar </button>
                    </div>
                    <!-- Final info bar -->
                </div>
                <!-- Final div tickets -->

                <!-- Inicio de tools -->
                <div id="tools" class="col-xl-4 col-lg-4 col-sm-12 col-12 border border-1">

                    <!-- Inicio ticket preview BEFORE cobrar -->
                    <div id="complete-the-ticket-submit" tabindex="0" hidden>
                        <h1 id="complete-ticket-bill" class="display-4 mb-2"></h1>
                        <h3 id="cantity-of-change" class="display-5 mb-3"></h3>

                        <form action="submit" id="ticket-change&notes-form">
                            <div class="input-group mb-3">
                                <span class="input-group-text">$</span>
                                <input type="number" class="form-control" step="any" id="change-for-ticket">
                            </div>
                            
                            <div class="form-floating mb-3" id="notes-for-sell-div" hidden>
                                <textarea id="notes-for-sell" class="form-control" placeholder="Introduce las notas de venta"></textarea>
                                <label for="notes-for-sell">Notas de la venta</label>
                            </div>
                            
                            <button type="button" id="show-notes" class="btn btn-outline-color">Agregar notas de venta</button>
                            <button type="submit" class="btn btn-primary-color">Cobrar</button>
                        </form>
                    </div>                    
                    <!-- Final ticket preview -->

                    <!-- Inicio cantidad a granel -->
                    <div id="cantity-of-product" class="mb-3" tabindex="0" hidden>
                        <h2 id="granel-title">Producto: </h2>
                        <form action="submit" id="form-cantity-of-product">

                            <div class="input-group mb-3">
                                <span class="input-group-text">Peso (Kg)</span>
                                <input type="number" class="form-control" step="any" id="cantity-of-product-weight" value="1" required>
                            </div>

                            <div class="input-group mb-3">
                                <span class="input-group-text">Precio:</span>
                                <input type="number" class="form-control" step="any" id="cantity-of-product-price" value="1" required>
                            </div>
                            
                            <button type="submit" class="btn btn-primary-color">Confirmar</button>
                            <button type="button" id="btn-cancel-granel" class="btn btn-outline-color">Cancelar</button>
                        </form>
                    </div>
                    <!-- Final cantidad a granel -->
                    
                    <!-- Inicio finded prodcuts panel -->
                    <div id="finded-products-container" tabindex="0" hidden>
                        <div id="finded-products">
                            <table class="table table-hover table-xl">
                                <thead id="finded-products-table-head">
                                    <th>Descripción</th>
                                    <th>Precio</th>
                                </thead>
                                <tbody id="finded-products-table-body">
                                    <!-- Aqui van los productos encontrados -->
                                </tbody>
                            </table>
                        </div>
                        <div id="control-finded-panel">
                            <button id="add-finded-product" class="btn btn-primary-color mx-3 my-2">Agregar producto</button>
                        </div>
                    </div>
                    <!-- Final finded products panel -->

                    <!-- Inicio articulo comun panel -->
                    <div id="common-article-div" hidden tabindex="0">
                        <h2>Venta de arcticulo comun</h2>
                        <form action="submit" id="common-article-form">

                            <div class="input-group mb-3">
                                <span class="input-group-text">Nombre:</span>
                                <input id="common-article-name" class="form-control" type="text" placeholder="Nombre de producto..." required>
                            </div>

                            <div class="input-group mb-3">
                                <span class="input-group-text">Cantidad:</span>
                                <input id="common-article-cantity" class="form-control" type="number" step="any" required>
                            </div>
                            
                            <div class="input-group mb-3">
                                <span class="input-group-text">$</span>
                                <input id="common-article-price" class="form-control" type="number" step="any" placeholder="$" required>
                            </div>
                            
                            <button type="submit" class="btn btn-primary-color">Confirmar</button>
                            <button type="button" class="btn btn-outline-color">Cancelar</button>
                        </form>
                    </div>
                    <!-- Final articulo comun panel -->
                </div>
                <!-- Final tools div -->
            </div>
        </div>
    </main>

    <script src="js/API/main.js"></script>
    <script src="js/API/consultas.js"></script>
    <script src="js/API/index/finded-products.js"></script>
    <script src="js/API/index/ticket-functions.js"></script>
    <script src="js/API/index/functions.js"></script>
    <script src="js/API/index/punto-de-venta.js"></script>
    <script src="js/bootsrap/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/66cd4be8be.js" crossorigin="anonymous"></script>
</body>
</html>